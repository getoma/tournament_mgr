{% import 'base/form.twig' as form %}
{% import 'base/match.twig' as part %}

{% include 'base/header.twig' with {
  'active_page': 'show_category_ko',
  'css': ['tree.css']
} %}

<section>
<h2>{{ route_context.category.name }} - KO-Runde</h2>
{{ part.printKo(ko, chunks, route_context.args) }}
</section>

{% if unmapped_participants is not empty %}
<section>
  <h2>Nicht zugewiesen</h2>
  <ul>
    {% for p in unmapped_participants %}
    <li>{{p.lastname}}, {{p.firstname}}</li>
    {% endfor %}
  </ul>
</section>
{% endif %}

<form action="{{url_for('reset_category_results', route_context.args)}}" method="post">
  <button type="submit">Ergebnisse l√∂schen</button>
</form>

{% if policy.isActionAllowed('ManageSetup') %}
<form action="{{url_for('repopulate_category', route_context.args)}}" method="post">
  <button type="submit">Teilnehmer neu verteilen</button>
</form>
{% endif %}

{% include 'base/footer.twig' %}
