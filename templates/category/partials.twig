
{% macro printSlot(slot, baseurl) %}
{%-if slot.getParticipant()%}{{slot.getParticipant().lastname}}, {{slot.getParticipant().firstname}}
{%-else%}{{slot.str()}}
{%-endif%}
{% endmacro %}

{% macro printMatch(node, baseurl) %}
<span class="fight_participant red">{{_self.printSlot(node.slotRed, baseurl)}}</span> vs. <span class="fight_participant white">{{_self.printSlot(node.slotWhite, baseurl)}}</span>
{% endmacro %}

{% macro printPools(pools, baseurl) %}
<ul class="pool_list">
  {% for pool in pools %}
  <li>
    <p class="pool_name">Pool {{pool.getName()}}</p>
    <ul class="participant_list">
      {% for slot in pool.participants %}
      <li>{{slot.lastname}}, {{slot.firstname}}</li>
      {% endfor %}
    </ul>
    <p class="fight_list">Kämpfe:</p>
    <ul class="fight_list">
      {% for match in pool.getMatchList() %}
      <li>{{ _self.printMatch(match, baseurl) }}</li>
      {% endfor %}
    </ul>
  </li>
  {% endfor %}
</ul>
{% endmacro %}

{% macro printKo(ko, chunks, baseurl) %}
<ul class="fight_tree">
  {%- if chunks is defined %}
  <li><span class="round_caption">Kampfflächen</span>
    <ul class="fight_round">
      {% for name, chunk in chunks %}
      <li><span class="fight_name"><a href="{{baseurl}}/area/ko/{{name}}">Gewinner {{chunk.name}}</a></span>
          <span>(tbd)</span>
      </li>
      {% endfor %}
    </ul>
  </li>
  {% endif %}
  {% for round in ko %}
  <li><span class="round_caption">Runde {{loop.index}}</span>
    <ul class="fight_round">
      {% for node in round %}
      <li><span class="fight_name">Kampf {{node.name}}{% if node.area is defined %} ({{node.area.name}}){%endif%}</span>
        {{ _self.printMatch(node, baseurl) }}
      </li>
      {% endfor %}
    </ul>
  </li>
  {% endfor %}
</ul>
{% endmacro %}